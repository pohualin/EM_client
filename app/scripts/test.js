'use strict';

angular.module('emmiManager')

    .controller('TestCtrl', function ($scope) {

        $scope.selectedState = '';
        $scope.states = ['Alabama','Alaska','Arizona','Arkansas','California','Colorado','Connecticut','Delaware','Florida','Georgia','Hawaii','Idaho','Illinois','Indiana','Iowa','Kansas','Kentucky','Louisiana','Maine','Maryland','Massachusetts','Michigan','Minnesota','Mississippi','Missouri','Montana','Nebraska','Nevada','New Hampshire','New Jersey','New Mexico','New York','North Dakota','North Carolina','Ohio','Oklahoma','Oregon','Pennsylvania','Rhode Island','South Carolina','South Dakota','Tennessee','Texas','Utah','Vermont','Virginia','Washington','West Virginia','Wisconsin','Wyoming'];

        $scope.albumPool = [{'images':{'small':'http://userserve-ak.last.fm/serve/34s/79799973.png','medium':'http://userserve-ak.last.fm/serve/64s/79799973.png','large':'http://userserve-ak.last.fm/serve/126/79799973.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/79799973.png'},'artist':'Muse','name':'Black Holes and Revelations'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/87899249.png','medium':'http://userserve-ak.last.fm/serve/64s/87899249.png','large':'http://userserve-ak.last.fm/serve/126/87899249.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/87899249.png'},'artist':'Amy Winehouse','name':'Back to Black'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/82638919.png','medium':'http://userserve-ak.last.fm/serve/64s/82638919.png','large':'http://userserve-ak.last.fm/serve/126/82638919.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/82638919.png'},'artist':'My Chemical Romance','name':'The Black Parade'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88011957.png','medium':'http://userserve-ak.last.fm/serve/64s/88011957.png','large':'http://userserve-ak.last.fm/serve/126/88011957.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88011957.png'},'artist':'Black Sabbath','name':'Paranoid'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/81981459.jpg','medium':'http://userserve-ak.last.fm/serve/64s/81981459.jpg','large':'http://userserve-ak.last.fm/serve/126/81981459.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/81981459.jpg'},'artist':'AC/DC','name':'Back in Black'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88060665.png','medium':'http://userserve-ak.last.fm/serve/64s/88060665.png','large':'http://userserve-ak.last.fm/serve/126/88060665.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88060665.png'},'artist':'Black Eyed Peas','name':'Monkey Business'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/47468489.png','medium':'http://userserve-ak.last.fm/serve/64s/47468489.png','large':'http://userserve-ak.last.fm/serve/126/47468489.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/47468489.png'},'artist':'The Black Keys','name':'Brothers'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88060607.png','medium':'http://userserve-ak.last.fm/serve/64s/88060607.png','large':'http://userserve-ak.last.fm/serve/126/88060607.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88060607.png'},'artist':'Black Eyed Peas','name':'Elephunk'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/41939933.png','medium':'http://userserve-ak.last.fm/serve/64s/41939933.png','large':'http://userserve-ak.last.fm/serve/126/41939933.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/41939933.png'},'artist':'Placebo','name':'Black Market Music'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/67177330.png','medium':'http://userserve-ak.last.fm/serve/64s/67177330.png','large':'http://userserve-ak.last.fm/serve/126/67177330.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/67177330.png'},'artist':'Amy Winehouse','name':'Back to Black (Deluxe Edition)'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/83210141.png','medium':'http://userserve-ak.last.fm/serve/64s/83210141.png','large':'http://userserve-ak.last.fm/serve/126/83210141.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/83210141.png'},'artist':'Jay-Z','name':'The Black Album'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88060749.png','medium':'http://userserve-ak.last.fm/serve/64s/88060749.png','large':'http://userserve-ak.last.fm/serve/126/88060749.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88060749.png'},'artist':'Black Eyed Peas','name':'The E.N.D. (The Energy Never Dies)'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/69597194.png','medium':'http://userserve-ak.last.fm/serve/64s/69597194.png','large':'http://userserve-ak.last.fm/serve/126/69597194.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/69597194.png'},'artist':'Britney Spears','name':'Blackout'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/80494663.png','medium':'http://userserve-ak.last.fm/serve/64s/80494663.png','large':'http://userserve-ak.last.fm/serve/126/80494663.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/80494663.png'},'artist':'Cypress Hill','name':'Black Sunday'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/9788079.jpg','medium':'http://userserve-ak.last.fm/serve/64s/9788079.jpg','large':'http://userserve-ak.last.fm/serve/126/9788079.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/9788079.jpg'},'artist':'The Hives','name':'The Black and White Album'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/61870927.png','medium':'http://userserve-ak.last.fm/serve/64s/61870927.png','large':'http://userserve-ak.last.fm/serve/126/61870927.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/61870927.png'},'artist':'Goldfrapp','name':'Black Cherry'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88060827.png','medium':'http://userserve-ak.last.fm/serve/64s/88060827.png','large':'http://userserve-ak.last.fm/serve/126/88060827.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88060827.png'},'artist':'Black Eyed Peas','name':'The E.N.D.'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/53547481.png','medium':'http://userserve-ak.last.fm/serve/64s/53547481.png','large':'http://userserve-ak.last.fm/serve/126/53547481.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/53547481.png'},'artist':'Alter Bridge','name':'Blackbird'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/45606813.png','medium':'http://userserve-ak.last.fm/serve/64s/45606813.png','large':'http://userserve-ak.last.fm/serve/126/45606813.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/45606813.png'},'artist':'Black Sabbath','name':'Master of Reality'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/87154331.png','medium':'http://userserve-ak.last.fm/serve/64s/87154331.png','large':'http://userserve-ak.last.fm/serve/126/87154331.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/87154331.png'},'artist':'The Black Keys','name':'Attack & Release'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/73206402.png','medium':'http://userserve-ak.last.fm/serve/64s/73206402.png','large':'http://userserve-ak.last.fm/serve/126/73206402.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/73206402.png'},'artist':'Black Sabbath','name':'Black Sabbath'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/86449533.jpg','medium':'http://userserve-ak.last.fm/serve/64s/86449533.jpg','large':'http://userserve-ak.last.fm/serve/126/86449533.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/86449533.jpg'},'artist':'Mos Def','name':'Black On Both Sides'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/10336403.jpg','medium':'http://userserve-ak.last.fm/serve/64s/10336403.jpg','large':'http://userserve-ak.last.fm/serve/126/10336403.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/10336403.jpg'},'artist':'Black Rebel Motorcycle Club','name':'Howl'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/80506183.png','medium':'http://userserve-ak.last.fm/serve/64s/80506183.png','large':'http://userserve-ak.last.fm/serve/126/80506183.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/80506183.png'},'artist':'The Black Keys','name':'Rubber Factory'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/67886334.png','medium':'http://userserve-ak.last.fm/serve/64s/67886334.png','large':'http://userserve-ak.last.fm/serve/126/67886334.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/67886334.png'},'artist':'Black Rebel Motorcycle Club','name':'B.R.M.C.'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/9044695.png','medium':'http://userserve-ak.last.fm/serve/64s/9044695.png','large':'http://userserve-ak.last.fm/serve/126/9044695.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/9044695.png'},'artist':'Ray LaMontagne','name':'Till The Sun Turns Black'},{'images':{'small':'http://images.amazon.com/images/P/B0000DZFL0.01._SCMZZZZZZZ_.jpg','medium':'http://images.amazon.com/images/P/B0000DZFL0.01._SCMZZZZZZZ_.jpg','large':'http://images.amazon.com/images/P/B0000DZFL0.01._SCMZZZZZZZ_.jpg','extralarge':'http://images.amazon.com/images/P/B0000DZFL0.01._SCMZZZZZZZ_.jpg'},'artist':'Jay-Z','name':'Black Album'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/78271776.jpg','medium':'http://userserve-ak.last.fm/serve/64s/78271776.jpg','large':'http://userserve-ak.last.fm/serve/126/78271776.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/78271776.jpg'},'artist':'Hawthorne Heights','name':'The Silence in Black and White'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/78496130.png','medium':'http://userserve-ak.last.fm/serve/64s/78496130.png','large':'http://userserve-ak.last.fm/serve/126/78496130.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/78496130.png'},'artist':'Black Sabbath','name':'Sabbath Bloody Sabbath'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/63044785.png','medium':'http://userserve-ak.last.fm/serve/64s/63044785.png','large':'http://userserve-ak.last.fm/serve/126/63044785.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/63044785.png'},'artist':'Black Label Society','name':'Mafia'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/77736200.jpg','medium':'http://userserve-ak.last.fm/serve/64s/77736200.jpg','large':'http://userserve-ak.last.fm/serve/126/77736200.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/77736200.jpg'},'artist':'The Black Keys','name':'Thickfreakness'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/81216673.png','medium':'http://userserve-ak.last.fm/serve/64s/81216673.png','large':'http://userserve-ak.last.fm/serve/126/81216673.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/81216673.png'},'artist':'Rilo Kiley','name':'Under The Blacklight'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/86192233.png','medium':'http://userserve-ak.last.fm/serve/64s/86192233.png','large':'http://userserve-ak.last.fm/serve/126/86192233.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/86192233.png'},'artist':'Bonobo','name':'Black Sands'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/88495273.png','medium':'http://userserve-ak.last.fm/serve/64s/88495273.png','large':'http://userserve-ak.last.fm/serve/126/88495273.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/88495273.png'},'artist':'Alice in Chains','name':'Black Gives Way to Blue'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/86002769.png','medium':'http://userserve-ak.last.fm/serve/64s/86002769.png','large':'http://userserve-ak.last.fm/serve/126/86002769.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/86002769.png'},'artist':'The Black Keys','name':'The Big Come Up'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/10310053.jpg','medium':'http://userserve-ak.last.fm/serve/64s/10310053.jpg','large':'http://userserve-ak.last.fm/serve/126/10310053.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/10310053.jpg'},'artist':'Black Kids','name':'Wizard of Ahhhs'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/57738209.png','medium':'http://userserve-ak.last.fm/serve/64s/57738209.png','large':'http://userserve-ak.last.fm/serve/126/57738209.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/57738209.png'},'artist':'Black Flag','name':'Damaged'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/77134832.png','medium':'http://userserve-ak.last.fm/serve/64s/77134832.png','large':'http://userserve-ak.last.fm/serve/126/77134832.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/77134832.png'},'artist':'Black Rebel Motorcycle Club','name':'Baby 81'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/87358851.png','medium':'http://userserve-ak.last.fm/serve/64s/87358851.png','large':'http://userserve-ak.last.fm/serve/126/87358851.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/87358851.png'},'artist':'Black Star','name':'Mos Def & Talib Kweli Are Black Star'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/78260102.jpg','medium':'http://userserve-ak.last.fm/serve/64s/78260102.jpg','large':'http://userserve-ak.last.fm/serve/126/78260102.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/78260102.jpg'},'artist':'Okkervil River','name':'Black Sheep Boy'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/78850465.png','medium':'http://userserve-ak.last.fm/serve/64s/78850465.png','large':'http://userserve-ak.last.fm/serve/126/78850465.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/78850465.png'},'artist':'Opeth','name':'Blackwater Park'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/78496228.png','medium':'http://userserve-ak.last.fm/serve/64s/78496228.png','large':'http://userserve-ak.last.fm/serve/126/78496228.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/78496228.png'},'artist':'Black Sabbath','name':'Heaven and Hell'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/71475018.png','medium':'http://userserve-ak.last.fm/serve/64s/71475018.png','large':'http://userserve-ak.last.fm/serve/126/71475018.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/71475018.png'},'artist':'The Black Keys','name':'El Camino'},{'images':{'small':'http://images.amazon.com/images/P/B00001QGPS.01.THUMBZZZ.jpg','medium':'http://images.amazon.com/images/P/B00001QGPS.01.MZZZZZZZ.jpg','large':'http://images.amazon.com/images/P/B00001QGPS.01.LZZZZZZZ.jpg','extralarge':'http://images.amazon.com/images/P/B00001QGPS.01.LZZZZZZZ.jpg'},'artist':'Method Man & Redman','name':'Black Out'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/9995535.jpg','medium':'http://userserve-ak.last.fm/serve/64s/9995535.jpg','large':'http://userserve-ak.last.fm/serve/126/9995535.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/9995535.jpg'},'artist':'Various Artists','name':'Light Sound Dance (Black Disc)'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/72461472.png','medium':'http://userserve-ak.last.fm/serve/64s/72461472.png','large':'http://userserve-ak.last.fm/serve/126/72461472.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/72461472.png'},'artist':'The Black Keys','name':'Magic Potion'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/87772007.png','medium':'http://userserve-ak.last.fm/serve/64s/87772007.png','large':'http://userserve-ak.last.fm/serve/126/87772007.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/87772007.png'},'artist':'Depeche Mode','name':'Black Celebration'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/54982535.png','medium':'http://userserve-ak.last.fm/serve/64s/54982535.png','large':'http://userserve-ak.last.fm/serve/126/54982535.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/54982535.png'},'artist':'Black Kids','name':'Partie Traumatic'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/84313953.jpg','medium':'http://userserve-ak.last.fm/serve/64s/84313953.jpg','large':'http://userserve-ak.last.fm/serve/126/84313953.jpg','extralarge':'http://userserve-ak.last.fm/serve/300x300/84313953.jpg'},'artist':'Dropkick Murphys','name':'Blackout'},{'images':{'small':'http://userserve-ak.last.fm/serve/34s/65312890.png','medium':'http://userserve-ak.last.fm/serve/64s/65312890.png','large':'http://userserve-ak.last.fm/serve/126/65312890.png','extralarge':'http://userserve-ak.last.fm/serve/300x300/65312890.png'},'artist':'AC/DC','name':'Black Ice'}];
        $scope.albums = [];

        $scope.pagination = {
            itemsPerPage: 5,
            currentPage: 0
        };
        $scope.searchCount = 0;
        $scope.limit = 10;

        $scope.searchAlbums = function(term) {
            if(!term) {
                $scope.searchCount = 0;
                $scope.albums = [];
            } else {
                $scope.albums = $scope.albumPool.filter(function(album) {
                    return album.name.toLowerCase().indexOf(term.toLowerCase()) !== -1;
                });
                $scope.searchCount = $scope.albums.length;
                $scope.albums = $scope.albums.slice(0, $scope.limit);
            }

            return $scope.albums;
        };


        $scope.selectAlbum = function(album) {
            console.log('album selected!', album);
            $scope.term = album.name;
            //return album.name;
        };

        $scope.imageSource = function(album) {
            return album.images.medium;
        };

        $scope.hasAlbums = function() {
            return $scope.albums.length > 0;
        };

        $scope.hasMore = function() {
            return $scope.searchCount > $scope.limit;
        };

    })

;
