<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>Emmi Manager</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- build:css({.tmp,app}) styles/main.css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="bower_components/angular-motion/dist/angular-motion.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap-additions/dist/bootstrap-additions.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="bower_components/chosen/chosen.css">
    <link rel="stylesheet" href="bower_components/angular-chosen-localytics/chosen-spinner.css">
    <!-- endbuild -->

    <!-- build:js scripts/modernizr.js -->
    <script src="bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->
</head>
<body>

<div data-ng-view></div>

<!-- build:js scripts/vendor.js -->
<!-- bower:js -->
<script src="bower_components/jquery/jquery.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/angular-cookies/angular-cookies.js"></script>
<script src="bower_components/angular-touch/angular-touch.js"></script>
<script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
<script src="bower_components/angular-resource/angular-resource.js"></script>
<script src="bower_components/angular-animate/angular-animate.js"></script>
<script src="bower_components/angular-route/angular-route.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
<script src="bower_components/angular-strap/dist/angular-strap.min.js"></script>
<script src="bower_components/angular-strap/dist/angular-strap.tpl.min.js"></script>
<script src="bower_components/angular-translate/angular-translate.js"></script>
<script src="bower_components/angular-translate-loader-static-files/angular-translate-loader-static-files.js"></script>
<script src="bower_components/angular-translate-storage-cookie/angular-translate-storage-cookie.js"></script>
<script src="bower_components/angular-dynamic-locale/src/tmhDynamicLocale.js"></script>
<script src="bower_components/chosen/chosen.jquery.js"></script>
<script src="bower_components/angular-chosen-localytics/chosen.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.extensions.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.date.extensions.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.numeric.extensions.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.phone.extensions.js"></script>
<script src="bower_components/jquery.inputmask/dist/inputmask/jquery.inputmask.regex.extensions.js"></script>
<script src="bower_components/moment/moment.js"></script>
<script src="bower_components/angular-moment/angular-moment.js"></script>
<!-- endbower -->
<!-- endbuild -->

<!-- build:js({app,.tmp}) scripts/main.js -->
<script src="scripts/vendor/http-auth-interceptor.js"></script>
<script src="scripts/vendor/hateoas.js"></script>
<script src="scripts/common/directives/typeahead/typeahead.js"></script>
<script src="scripts/common/directives/tags-input/tags-input.js"></script>
<script src="scripts/emmiManager.js"></script>
<script src="scripts/main/main-ctrl.js"></script>
<script src="scripts/main/main-service.js"></script>
<script src="scripts/vendor/rfc6570.js"></script>
<script src="scripts/auth/auth-ctrl.js"></script>
<script src="scripts/auth/auth-service.js"></script>
<script src="scripts/auth/session-service.js"></script>
<script src="scripts/common/directives/input-mask/input-mask.js"></script>
<script src="scripts/clients/clients-ctrl.js"></script>
<script src="scripts/clients/clients-service.js"></script>
<script src="scripts/teams/create/teams-create-ctrl.js"></script>
<script src="scripts/teams/create/teams-create-service.js"></script>
<script src="scripts/teams/view/teams-view-ctrl.js"></script>
<script src="scripts/teams/view/teams-view-service.js"></script>
<script src="scripts/clients/location/location-ctrl.js"></script>
<script src="scripts/clients/location/location-service.js"></script>
<script src="scripts/clients/tags/tags-ctrl.js"></script>
<script src="scripts/clients/tags/tags-service.js"></script>
<script src="scripts/common/directives/date/date.js"></script>
<script src="scripts/common/directives/tags-input/tag-groups.js"></script>
<!-- inject:partials -->
<!-- endinject -->
<!-- endbuild -->

<script>
    (function () {
        // load the initial web-api
        var initInjector = angular.injector(['ng']);
        var $http = initInjector.get('$http');
        $http.get('/webapi')
                .success(function (data) {
                    var api = {};
                    angular.forEach(data.link, function (item) {
                        if (item.rel && item.href) {
                            api[item.rel] = item.href;
                        }
                    });
                    // save as a constant
                    angular.module('emmiManager.api', [])
                            .constant('API', api);

                    // load the main application
                    angular.element(document).ready(function () {
                        angular.bootstrap(document, ['emmiManager']);
                    });
                })
                .error(function (data, response) {
                    window.location = '/404.html';
                    console.log("Unknown error");
                    console.log(data);
                    console.log(response);
                });
    })();
</script>
</body>
</html>
