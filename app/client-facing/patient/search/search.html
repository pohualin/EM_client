<div class="container" data-ng-cloak>
    <h2>
        Search Patients:
    </h2>
    <form name="searchForm">
        <div class="row">
            <div class="col-md-6 col-sm-5">
                <div class="input-group">
                    <input class="form-control" id="query" name="query"
                           data-ng-model="query" type="text" placeholder="Search..." required
                           data-auto-focus>
                    <div class="input-group-addon">
                        <span class="icon-search"></span>
                    </div>
                </div>
            </div>
            <div class="col-md-2 col-sm-3">
                <button class="btn btn-default pull-left" data-ng-click="search()"
                        data-ng-disabled="searchForm.query.$invalid || loading"
                        data-translate="global.buttons.search"></button>
                <span data-ng-class="{'search-spinner' : loading}"></span>
            </div>
            <div data-ng-show="searchPerformed">
                <div class="col-md-2 col-sm-2">
                    <div class="pull-right">
                        <a class="btn btn-link" data-ng-href="#/patients/new">
                            <i class="icon-plus icon-size-md">&nbsp;</i>Create New Patient
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <hr>
    <div class="row" data-ng-show="searchPerformed">
        <div class="col-md-12">
            <div class="row" data-ng-hide="removeStatusFilterAndTotal">
                <div class="col-md-12">
                    <div class="pull-right">
                        {{total}} <span data-ng-show="total != 1"
                                        data-translate="global.labels.total"> results</span> <span
                        data-ng-show="total === 1"
                        data-translate="global.labels.totalSingular"> result</span>
                    </div>
                </div>
            </div>
            <br>
            <table class="table table-bordered table-striped table-hover"
                   border="0" cellpadding="0" cellspacing="0" data-ng-show="patients">
                <tr>
                    <th class="sort col-sm-3" data-ng-click="sort('lastName')">Name
                        <span data-ng-show="sortProperty.property === 'lastName'"><span
                            class="sort-icon"
                            data-ng-class="{'fa-angle-down': sortProperty.ascending, 'fa-angle-up': !sortProperty.ascending}"></span></span>
                    </th>
                    <th class="sort col-sm-3" data-ng-click="sort('dateOfBirth')">Date of Birth
                        <span data-ng-show="sortProperty.property === 'dateOfBirth'"><span
                            class="sort-icon"
                            data-ng-class="{'fa-angle-down': sortProperty.ascending, 'fa-angle-up': !sortProperty.ascending}"></span></span>
                    </th>
                    <th class="col-sm-1">&nbsp;</th>
                </tr>
                <tr
                    data-ng-repeat="patient in patients | orderBy:'patient.sortIdx'">
                    <td>{{patient.entity.lastName}}, {{patient.entity.firstName}}</td>
                    <td>{{patient.entity.dateOfBirth}}</td>
                    <td><a href="#/patients/{{patient.entity.id}}">view</a></td>
                </tr>
            </table>
            <div class="row" data-ng-show="patients">
                <div data-ng-show="links" class="col-md-8 col-sm-8">
                    <ul class="pagination">
                        <li data-ng-repeat="link in links | orderBy:'order'"
                            data-ng-class="{'active': link.name == currentPage}"><a
                            data-ng-show="link.name != currentPage" href
                            data-ng-click="fetchPage(link.href)">{{link.name}}</a> <span
                            data-ng-hide="link.name != currentPage">{{link.name}}</span></li>
                    </ul>
                </div>
            </div>
            <div data-ng-hide="patients">
                <span>No results found, please try again or create a new patient.</span>
            </div>
        </div>
    </div>
</div>

